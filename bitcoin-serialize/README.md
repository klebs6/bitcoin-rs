# bitcoin-serialize

`bitcoin-serialize` is a Rust crate that provides serialization and deserialization interfaces for Bitcoin data structures. It focuses on efficient and type-safe encoding/decoding of various Bitcoin protocol data, including integers, strings, vectors, and tuples. The crate implements several specialized formatters to handle compact size integers and VarInts with big-endian and little-endian support. 

## Features

- **VarInt Modes**: Supports encoding VarInts in different modes. The Default mode is meant for non-signed values with a future provision to accommodate negative values in a backward-compatible manner.

- **Serialization/Deserialization Framework**: Offers `BtcSerialize` and `BtcUnserialize` traits that encapsulate the logic for reading from and writing to byte streams. 

- **Custom Formatters**: Includes `VarIntFormatter`, `CompactSizeFormatter`, and `CustomUintFormatter` for flexible data serialization, supporting both big-endian and little-endian encodings.

- **Macros**: Several macros such as `varint_mode!`, `compactsize!`, and `limited_string!` facilitate cleaner and more efficient code to encode/decode data directly into streams.

- **Utilities**: Helper functions like `write_u32_le`, `read_u32_le`, and macro rules offer low-level utilities to work with stream serialization/deserialization in a controlled manner.

## Usage

Add `bitcoin-serialize` as a dependency in your `Cargo.toml` file:

```toml
[dependencies]
bitcoin-serialize = "0.1.19"
```

Here's an example demonstrating basic serialization of a vector of unsigned integers:

```rust
use bitcoin_serialize::{BtcSerialize, VectorFormatter};
use std::io::Cursor;

fn main() {
    let mut data = vec![1, 2, 3, 4];
    let mut buf = vec![];
    
    // Serialize the vector
    VectorFormatter::<u64>::default().ser(&mut Cursor::new(&mut buf), &data);
    
    // Deserialize it back
    let mut output = vec![0u64; 4];
    VectorFormatter::<u64>::default().unser(&mut Cursor::new(&mut buf), &mut output);
    
    assert_eq!(data, output);
}
```

## Contribute

Contributions, issues, and feature requests are welcome. Feel free to check the repository at [github.com/klebs6/bitcoin-rs](https://github.com/klebs6/bitcoin-rs).

---

*Note: This README.md file was generated by an AI model and may not be 100% accurate; however, it should be pretty good.*