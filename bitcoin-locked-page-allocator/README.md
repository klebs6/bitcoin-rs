# bitcoin-locked-page-allocator

`bitcoin-locked-page-allocator` is a Rust crate that aids in the OS-dependent allocation and deallocation of locked or pinned memory pages. This crate is critical in applications that require secure memory management by preventing memory from being swapped to disk. It offers both Windows and POSIX implementations.

## Usage

Two main structures are provided:

- **Win32LockedPageAllocator**: This structure is specialized for Windows operating systems and uses `VirtualAlloc`, `VirtualLock`, and `VirtualFree` system calls to manage memory.
- **PosixLockedPageAllocator**: This is designed for Unix-based systems using `mmap`, `mlock`, and `munmap` to perform similar tasks.

### Traits

Both structures implement the following traits:

- `LockedPageAllocator`: Serves as an abstract base class for specialized allocators.
- `AllocateLocked`: Contains `allocate_locked` which allocates locked memory, returning a void pointer and setting a success flag.
- `FreeLocked`: Defines `free_locked` to release and cleanse the allocated memory safely.
- `GetLimit`: Allows querying the memory locking limits, returning a size indicative of the limit.

### Example

```rust
#[cfg(windows)]
let mut allocator = Win32LockedPageAllocator::new();
#[cfg(unix)]
let mut allocator = PosixLockedPageAllocator::new();

let mut success = false;
let memory = allocator.allocate_locked(1024, &mut success);
if success {
    // Proceed with memory usage
    allocator.free_locked(memory, 1024);
}
```

## Contributing

We encourage contributions from the community to improve the efficiency and capabilities of this crate.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Disclaimer

This README.md file was generated by an AI model and may not be 100% accurate; however, it should be pretty good.