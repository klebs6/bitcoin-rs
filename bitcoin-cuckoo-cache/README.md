# bitcoin-cuckoo-cache

**bitcoin-cuckoo-cache** is a Rust implementation of a cache utilizing a variant of the cuckoo hashing algorithm to optimize space and time complexity for efficient data retrieval and storage. It enables a concurrent and memory efficient cache mechanism with robust hash distribution for immutable data types.

## Introduction

The crate provides tailored hashing functionality through the `EightWayHasher` trait, which generates eight independent 32-bit hash values that underpin the cuckoo cache's operation.

## Cache Functionality

The primary data structure, `Cache`, maintains a collection of elements with customizable depth limits for hash lookups. It utilizes atomicity in operations with `BitPackedAtomicFlags` for internal memory state management.

### Key Operations:

- **Insert**: Adds elements while potentially evicting existing entries based on hash collisions and depth limits.
- **Contains**: Checks for element presence, with optional marking for entry discardability.
- **Setup/Setup Bytes**: Initializes the cache for a specified number of elements or bytes, ensuring efficient memory allocation.
- **Erasure Control**: With methods like `allow_erase` and `please_keep`, control over which elements may be discarded or preserved is afforded.

### Atomic Operations:

The `BitPackedAtomicFlags` utilizes atomic operations for managing garbage collection, achieving thread safety with high memory efficiency by packing collection flags into 8-bit allocations.

## Technical Details:

The functions are designed with a focus on efficient CPU cycles, especially when dealing with the hash bucket allocation strategy utilizing fixed-point arithmetic as a faster alternative to standard modular reduction.

## Usage

To get started, add `bitcoin-cuckoo-cache` to your `Cargo.toml`:

```toml
[dependencies]
bitcoin-cuckoo-cache = "0.1.19"
```

Use the crate to build a cache with custom hash functions, ensuring to call `setup` before inserting elements. Implement `EightWayHasher` for custom data types to integrate seamlessly.

## License

This project is licensed under the MIT License. See [LICENSE](https://github.com/klebs6/bitcoin-rs/blob/main/LICENSE) for details.

---

*Note: This README.md file was generated by an AI model and may not be 100% accurate; however, it should be pretty good.*
