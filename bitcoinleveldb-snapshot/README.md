# bitcoinleveldb-snapshot

The `bitcoinleveldb-snapshot` crate provides an abstraction layer for handling immutable snapshots of a database state. This crate is designed to support efficient concurrent read-access by multiple threads without necessitating additional synchronization mechanisms.

## Features

- **Snapshot Abstraction**: Defines the fundamental trait `Snapshot` for creating a consistent view at a specific sequence number.
- **Snapshot Management**: Implements `SnapshotList`, a doubly-linked list data structure, responsible for managing `SnapshotImpl` objects. Each snapshot in the list corresponds to a unique sequence number.
- **Lock-free Access**: Provides methods for safe multi-threaded access to the oldest and newest snapshots without locking, aided by the immutability of snapshots.
- **Efficient Memory Usage**: Snaphots are handled as mutable raw pointers ensuring a stable memory footprint without the overhead of Rust's borrow checker.

## Usage

To use this crate, add the following to your `Cargo.toml`:

```toml
[dependencies]
bitcoinleveldb-snapshot = "0.1.19"
```

Then, in your Rust code:

```rust
use bitcoinleveldb_snapshot::{Snapshot, SnapshotList};

let mut snapshot_list = SnapshotList::default();

// Add a new snapshot
let new_snapshot = snapshot_list.new(42); // sequence_number: 42

// Access the oldest and newest snapshots
let oldest_snapshot = snapshot_list.oldest();
let newest_snapshot = snapshot_list.newest();
```

## Important Considerations

- Snapshots lifecycle management expects users to adhere to the API's requirement of only invoking the `delete` method on valid, non-const snapshot pointers owned by the list.
- This crate's design assumes familiarity with unsafe Rust patterns and raw pointer manipulation.

## Contributing

Contributions are welcome. Please open an issue to discuss potential changes or submit a pull request directly in the [GitHub repository](https://github.com/klebs6/bitcoin-rs).

**Disclaimer**: This README was generated by an AI model and may not be 100% accurate; however, it should provide substantial guidance for the crate's usage.