# Bitcoin TokenPipe

`bitcoin-tokenpipe` is a Rust crate designed for efficient and reliable token-based interprocess and interthread communication through a pipe mechanism. This crate provides a robust method for transmitting one-byte values (tokens) between separate processes or threads in systems adhering to POSIX standards or Windows platforms.

## Features

- **Token Communication**: Facilitate single-byte token transfers using `TokenPipe` and `TokenPipeEnd` structures.
- **Platform Compatibility**: Operates on both POSIX and Windows due to conditional compilation and platform-specific functions.
- **File Descriptor Management**: Guarantees proper management of file descriptors to prevent resource leaks through methods such as `close`, `take_read_end`, and `take_write_end`.
- **Error Reporting**: Returns status codes to indicate errors, allowing for robust error handling.

## Usage

To use `bitcoin-tokenpipe` within your project, add the following to your `Cargo.toml`:

```toml
[dependencies]
bitcoin-tokenpipe = "0.1.19"
```

### Example

```rust
use bitcoin_tokenpipe::{TokenPipe, TokenPipeEndStatus};

fn main() {
    if let Some(pipe) = TokenPipe::make() {
        let mut read_end = pipe.take_read_end();
        let mut write_end = pipe.take_write_end();
        
        // Example write and read operations
        assert_eq!(write_end.token_write(42), 0);
        assert_eq!(read_end.token_read(), 42);
    }
}
```

## Safety and Concurrency

Appropriate safety measures are utilized, such as maintaining proper closure of file descriptors even in the event of errors. However, users must ensure thread safety when accessing pipe ends from multiple threads.

## Contribution

Contributions to `bitcoin-tokenpipe` are welcome. Please adhere to the guidelines stated in the [repository](https://github.com/klebs6/bitcoin-rs) issues for details on contributions and submitting pull requests.

## License

This project is licensed under the MIT License.

---

*This README.md was generated by an AI model and may not be 100% accurate; however, it should be pretty good.*