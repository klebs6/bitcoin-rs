# bitcoin-epoch

`bitcoin-epoch` is a Rust crate designed to optimize transaction graph traversal and deduplication using epoch-based algorithms, mimicking original techniques from C++. By eliminating the need for `std::set` or equivalent structures, this crate offers productively efficient alternatives that reduce traversal costs and minimize dynamic memory allocations.

## Features

- RAII-style EpochGuard for safe and scoped epoch management, preventing nested scopes to ensure safety.
- A sophisticated `with_fresh_epoch!` macro that echoes its C++ counterpart, making traversal implementations both elegant and robust.
- `Epoch`, `EpochGuard`, and `EpochMarker` abstractions for rigorous control over transaction deduplication.

## Usage

Begin a new epoch for a transaction traversal using:

```rust
with_fresh_epoch!(mempool_epoch);
```

This creates a new RAII guard that manages the epoch state automatically, ensuring no overlapping scopes:

```rust
let epoch = Rc::new(RefCell::new(Epoch::default()));
let guard = EpochGuard::new(epoch.clone());
// traversal operations
```

## Algorithmic Advantage

The `Epoch` structure acts as an internal counter tracking the current traversal epoch, replacing costly `std::set` structures. The epoch-based approach ensures only a constant-time check for deduplication instead of `O(log n)` operations with each additional set insertion.

Epoch-based strategies are inherently more scalable for large data sets typical in Bitcoin's transaction pools, where frequent graph traversals are required.

### Documentation and Integration

This crate relies on RAII principles for stability and predictability, making it suitable for high-performance applications in blockchain-based systems. It complements existing set-based algorithms while aspiring for outright replacement for improved efficiency.

---

This README.md file was generated by an AI model and may not be 100% accurate, however, it should be pretty good.